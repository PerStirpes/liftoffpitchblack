!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n(e.LDClient={})}(this,function(e){"use strict";function n(e){function n(e,n){Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.message=e,this.code=n}return n.prototype=new Error,n.prototype.name=e,n.prototype.constructor=n,n}var t=n("LaunchDarklyUnexpectedResponseError"),r=n("LaunchDarklyInvalidEnvironmentIdError"),o=n("LaunchDarklyInvalidUserError"),i=n("LaunchDarklyInvalidEventKeyError"),a=n("LaunchDarklyInvalidArgumentError"),u=n("LaunchDarklyFlagFetchError");function s(e){return!(e>=400&&e<500)||(400===e||408===e||429===e)}for(var c=function(e){for(var n,t=e.length,r=t%3,o=[],i=0,a=t-r;i<a;i+=16383)o.push(g(e,i,i+16383>a?a:i+16383));1===r?(n=e[t-1],o.push(l[n>>2]+l[n<<4&63]+"==")):2===r&&(n=(e[t-2]<<8)+e[t-1],o.push(l[n>>10]+l[n>>4&63]+l[n<<2&63]+"="));return o.join("")},l=[],f=[],v="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",d=0,p=v.length;d<p;++d)l[d]=v[d],f[v.charCodeAt(d)]=d;function g(e,n,t){for(var r,o,i=[],a=n;a<t;a+=3)r=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),i.push(l[(o=r)>>18&63]+l[o>>12&63]+l[o>>6&63]+l[63&o]);return i.join("")}f["-".charCodeAt(0)]=62,f["_".charCodeAt(0)]=63;var y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h=function e(n,t){if(n===t)return!0;var r,o=Array.isArray(n),i=Array.isArray(t);if(o&&i){if(n.length!=t.length)return!1;for(r=0;r<n.length;r++)if(!e(n[r],t[r]))return!1;return!0}if(o!=i)return!1;if(n&&t&&"object"===(void 0===n?"undefined":y(n))&&"object"===(void 0===t?"undefined":y(t))){var a=Object.keys(n);if(a.length!==Object.keys(t).length)return!1;var u=n instanceof Date,s=t instanceof Date;if(u&&s)return n.getTime()==t.getTime();if(u!=s)return!1;var c=n instanceof RegExp,l=t instanceof RegExp;if(c&&l)return n.toString()==t.toString();if(c!=l)return!1;for(r=0;r<a.length;r++)if(!Object.prototype.hasOwnProperty.call(t,a[r]))return!1;for(r=0;r<a.length;r++)if(!e(n[a[r]],t[a[r]]))return!1;return!0}return!1},m=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e};function w(e){var n=unescape(encodeURIComponent(e));return c(function(e){for(var n=[],t=0;t<e.length;t++)n.push(e.charCodeAt(t));return n}(n))}function k(e){return w(e).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function b(e){return JSON.parse(JSON.stringify(e))}function E(e){setTimeout(e,0)}function S(e,n){var t=e.then(function(e){return n&&setTimeout(function(){n(null,e)},0),e},function(e){if(!n)return Promise.reject(e);setTimeout(function(){n(e,null)},0)});return n?void 0:t}function D(e){e.setRequestHeader("X-LaunchDarkly-User-Agent","JSClient/2.8.0")}function O(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];return n.reduce(function(e,n){return m({},e,n)},{})}var R=2e3;function N(e,n,t,r){var o=void 0,i=e+"/events/bulk/"+n,a=e+"/a/"+n+".gif",u={};function c(e,n){var t=new window.Image;n&&t.addEventListener("load",n),t.src=e}function l(e,n,t){var o=r||c,u=JSON.stringify(e),l=function(e){if(n)(function n(r){var o=new window.XMLHttpRequest;return o.open("POST",i,!t),D(o),o.setRequestHeader("Content-Type","application/json"),o.setRequestHeader("X-LaunchDarkly-Event-Schema","3"),t||(o.addEventListener("load",function(){o.status>=400&&s(o.status)&&r?n(!1).send(u):e(function(e){var n={status:e.status},t=e.getResponseHeader("Date");if(t){var r=Date.parse(t);r&&(n.serverTime=r)}return n}(o))}),r&&o.addEventListener("error",function(){n(!1).send(u)})),o})(!0).send(u);else{var r=a+"?d="+k(u);o(r,t?null:e)}};if(!t)return new Promise(function(e){l(e)});l()}return u.sendEvents=function(n,r){void 0===o&&(o=void 0===t?"withCredentials"in new window.XMLHttpRequest:t);var i=void 0!==r&&r,a=void 0;a=o?[n]:function(e,n){for(var t=n.slice(0),r=[],o=e,i=void 0;t.length>0;){for(i=[];o>0;){var a=t.shift();if(!a)break;(o-=k(JSON.stringify(a)).length)<0&&i.length>0?t.unshift(a):i.push(a)}o=e,r.push(i)}return r}(R-e.length,n);for(var u=[],s=0;s<a.length;s++)u.push(l(a[s],o,i));return r?Promise.resolve():Promise.all(u)},u}var T=" Please see https://docs.launchdarkly.com/docs/js-sdk-reference#section-initializing-the-client for instructions on SDK initialization.",U=function(){return"localStorage is unavailable"},L=function(e){return'Custom event "'+e+'" does not exist'},x=function(){return"environment not found."+T},P=function(){return"No environment specified."+T},I=function(e){return"Error fetching flag settings: "+(e.message||e)},j=function(){return"No user specified."+T},A=function(){return"Invalid user specified."+T},C=function(){return"LaunchDarkly client was initialized with bootstrap data that did not include flag metadata. Events may not be sent correctly."+T},F=function(){return"LaunchDarkly bootstrap data is not available because the back end could not read the flags."},_=function(e,n){return'[LaunchDarkly] "'+e+'" is deprecated, please use "'+n+'"'},J=function(e,n,t){return"Received error "+e+(401===e?" (invalid SDK key)":"")+" for "+n+" - "+(s(e)?t:"giving up permanently")};function q(e){var n={},t=void 0!==e.allAttributesPrivate?e.allAttributesPrivate:e.all_attributes_private,r=(void 0!==e.privateAttributeNames?e.privateAttributeNames:e.private_attribute_names)||[],o={key:!0,custom:!0,anonymous:!0},i={key:!0,secondary:!0,ip:!0,country:!0,email:!0,firstName:!0,lastName:!0,avatar:!0,name:!0,anonymous:!0,custom:!0};return void 0!==e.all_attributes_private&&console&&console.warn&&console.warn(_("all_attributes_private","allAttributesPrivate")),void 0!==e.private_attribute_names&&console&&console.warn&&console.warn(_("private_attribute_names","privateAttributeNames")),n.filterUser=function(e){if(!e)return null;var n=e.privateAttributeNames||[],a=function(e,i){return Object.keys(e).reduce(function(a,u){var s=a;return i(u)&&(!function(e){return!o[e]&&(t||-1!==n.indexOf(e)||-1!==r.indexOf(e))}(u)?s[0][u]=e[u]:s[1][u]=!0),s},[{},{}])},u=a(e,function(e){return i[e]}),s=u[0],c=u[1];if(e.custom){var l=a(e.custom,function(){return!0});s.custom=l[0],c=O({},c,l[1])}var f=Object.keys(c);return f.length&&(f.sort(),s.privateAttrs=f),s},n}function H(e,n){var r,o,i,u,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,f=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,v={},d=f||N(e,n),p=(o=0,i=0,u={},(r={}).summarizeEvent=function(e){if("feature"===e.kind){var n=e.key+":"+(null!==e.variation&&void 0!==e.variation?e.variation:"")+":"+(null!==e.version&&void 0!==e.version?e.version:""),t=u[n];t?t.count=t.count+1:u[n]={count:1,key:e.key,variation:e.variation,version:e.version,value:e.value,default:e.default},(0===o||e.creationDate<o)&&(o=e.creationDate),e.creationDate>i&&(i=e.creationDate)}},r.getSummary=function(){var e={},n=!0;for(var t in u){var r=u[t],a=e[r.key];a||(a={default:r.default,counters:[]},e[r.key]=a);var s={value:r.value,count:r.count};void 0!==r.variation&&null!==r.variation&&(s.variation=r.variation),r.version?s.version=r.version:s.unknown=!0,a.counters.push(s),n=!1}return n?null:{startDate:o,endDate:i,features:e}},r.clearSummary=function(){o=0,i=0,u={}},r),g=q(c),y=!!c.inlineUsersInEvents,h=[],m=void 0,w=void 0,k=0,b=!1,S=void 0;function D(e){E(function(){l&&l.maybeReportError(new a(e))})}function R(){return 0===w||0===Math.floor(Math.random()*w)}return void 0!==c.samplingInterval&&(isNaN(c.samplingInterval)||c.samplingInterval<0)?(w=0,D("Invalid sampling interval configured. Sampling interval must be an integer >= 0.")):w=c.samplingInterval||0,void 0!==c.flushInterval&&(isNaN(c.flushInterval)||c.flushInterval<2e3)?(m=2e3,D("Invalid flush interval configured. Must be an integer >= 2000 (milliseconds).")):m=c.flushInterval||2e3,v.enqueue=function(e){if(!b){var n,t=!1,r=!1;if(p.summarizeEvent(e),"feature"===e.kind?R()&&(t=!!e.trackEvents,r=!!(n=e).debugEventsUntilDate&&n.debugEventsUntilDate>k&&n.debugEventsUntilDate>(new Date).getTime()):t=R(),t&&h.push(function(e){var n=O({},e);return y||"identify"===e.kind?n.user=g.filterUser(e.user):(n.userKey=e.user.key,delete n.user),"feature"===e.kind&&(delete n.trackEvents,delete n.debugEventsUntilDate),n}(e)),r){var o=O({},e,{kind:"debug"});delete o.trackEvents,delete o.debugEventsUntilDate,delete o.variation,h.push(o)}}},v.flush=function(e){if(b)return Promise.resolve();var n=h,r=p.getSummary();return p.clearSummary(),r&&(r.kind="summary",n.push(r)),0===n.length?Promise.resolve():(h=[],d.sendEvents(n,e).then(function(e){e&&(e.serverTime&&(k=e.serverTime),s(e.status)||(b=!0),e.status>=400&&E(function(){l.maybeReportError(new t(J(e.status,"event posting","some events were dropped")))}))}))},v.start=function(){S=setTimeout(function e(){v.flush(),S=setTimeout(e,m)},m)},v.stop=function(){clearTimeout(S)},v}function $(){var e={},n={};return e.on=function(e,t,r){n[e]=n[e]||[],n[e]=n[e].concat({handler:t,context:r})},e.off=function(e,t,r){if(n[e])for(var o=0;o<n[e].length;o++)n[e][o].handler===t&&n[e][o].context===r&&(n[e]=n[e].slice(0,o).concat(n[e].slice(o+1)))},e.emit=function(e){if(n[e])for(var t=0;t<n[e].length;t++)n[e][t].handler.apply(n[e][t].context,Array.prototype.slice.call(arguments,1))},e.getEvents=function(){return Object.keys(n)},e.getEventListenerCount=function(e){return n[e]?n[e].length:0},e.maybeReportError=function(e){e&&(n["error"]?this.emit("error",e):console.error(e.message))},e}var z=/[|\\{}()[\]^$+*?.]/g,G=function(e){if("string"!=typeof e)throw new TypeError("Expected a string");return e.replace(z,"\\$&")};function M(e,n,t,r){var o=n.replace(t,"").replace(r,""),i=void 0,a=void 0;switch(e.kind){case"exact":a=n,i=new RegExp("^"+G(e.url)+"/?$");break;case"canonical":a=o,i=new RegExp("^"+G(e.url)+"/?$");break;case"substring":a=o,i=new RegExp(".*"+G(e.substring)+".*$");break;case"regex":a=o,i=new RegExp(e.pattern);break;default:return!1}return i.test(a)}function K(e,n){for(var t={},r=null,o=[],i=0;i<e.length;i++)for(var a=e[i],u=a.urls||[],s=0;s<u.length;s++)if(M(u[s],window.location.href,window.location.search,window.location.hash)){"pageview"===a.kind?n("pageview",a):(o.push(a),n("click_pageview",a));break}return o.length>0&&(r=function(e){for(var t=function(e,n){for(var t=[],r=0;r<n.length;r++)for(var o=e.target,i=n[r],a=i.selector,u=document.querySelectorAll(a);o&&u.length>0;){for(var s=0;s<u.length;s++)o===u[s]&&t.push(i);o=o.parentNode}return t}(e,o),r=0;r<t.length;r++)n("click",t[r])},document.addEventListener("click",r)),t.dispose=function(){document.removeEventListener("click",r)},t}var X="application/json";function B(e,n,t,r){var o=new window.XMLHttpRequest,i=void 0;return o.addEventListener("load",function(){200===o.status&&o.getResponseHeader("Content-type")&&0===o.getResponseHeader("Content-Type").lastIndexOf(X)?t(null,JSON.parse(o.responseText)):t(V(o))}),o.addEventListener("error",function(){t(V(o))}),n?(o.open("REPORT",e),o.setRequestHeader("Content-Type","application/json"),i=JSON.stringify(n)):o.open("GET",e),r&&D(o),o.send(i),o}function V(e){return 404===e.status?new r(x()):e.statusText}function Y(e,n){var t={},r=void 0;return t.setUser=function(e){r=function(e){var n=b(e);return n.key&&(n.key=n.key.toString()),n}(e),n(b(r))},t.getUser=function(){return r?b(r):null},e&&t.setUser(e),t}var Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},W="ready",Z="initialized",ee="failed",ne="change",te="goalsReady",re=300;function oe(e,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=a.baseUrl||"https://app.launchdarkly.com",c=a.eventsUrl||"https://events.launchdarkly.com",l=a.streamUrl||"https://clientstream.launchdarkly.com",f=a.hash,v=V("sendEvents",!0),d=V("sendLDHeaders",!0),p=!!a.allowFrequentDuplicateEvents,g=!!a.sendEventsOnlyForVariation,y=void 0===a.fetchGoals||a.fetchGoals,m=e,b=$(),D=function(e,n,t,r){var o={},i=e+"/eval/"+n+"/",a=r&&r.useReport||!1,u=r&&r.evaluationReasons||!1,s=r&&r.streamReconnectDelay||1e3,c=3e5,l=null,f=null,v=null,d=null;function p(){h(),g(s)}function g(e){f||(e?f=setTimeout(y,e):y())}function y(){var r=void 0,o="";if(void 0!==window.EventSource){a?r=e+"/ping/"+n:(r=i+k(JSON.stringify(v)),null!=t&&(o="h="+t)),u&&(o=o+(o?"&":"")+"withReasons=true"),r=r+(o?"?":"")+o,h();var s={heartbeatTimeout:c,silentTimeout:c};for(var f in l=new window.EventSource(r,s),d)d.hasOwnProperty(f)&&l.addEventListener(f,d[f]);l.onerror=p}}function h(){l&&(l.close(),l=null)}return o.connect=function(e,n){v=e,d=n,g()},o.disconnect=function(){clearTimeout(f),f=null,h()},o.isConnected=function(){return l&&(l.readyState===window.EventSource.OPEN||l.readyState===window.EventSource.CONNECTING)},o}(l,m,f,a),R=a.eventProcessor||H(c,m,a,b),N=function(e,n,t,r,o){var i=void 0,a=void 0,u={fetchFlagSettings:function(u,s,c){var l=void 0,f=void 0,v="",d=void 0,p=void 0;t?(f=[e,"/sdk/evalx/",n,"/user"].join(""),d=u):(l=k(JSON.stringify(u)),f=[e,"/sdk/evalx/",n,"/users/",l].join("")),s&&(v="h="+s),r&&(v=v+(v?"&":"")+"withReasons=true"),f=f+(v?"?":"")+v;var g,y,h=(g=c,function(e,n){g(e,n),i=null,a=null});i?(i.abort(),y=a,p=function(){y&&y.apply(null,arguments),h.apply(null,arguments)}):p=h,a=p,i=B(f,d,p,o)},fetchGoals:function(t){B([e,"/sdk/goals/",n].join(""),null,t,o)}};return u}(s,m,a.useReport,a.evaluationReasons,d),T={},x="object"===Q(a.bootstrap)?function(e){var n=Object.keys(e),t=e.$flagsState;!t&&n.length&&console.warn(C());!1===e.$valid&&console.warn(F());var r={};return n.forEach(function(n){if("$flagsState"!==n&&"$valid"!==n){var o={value:e[n]};t&&t[n]?o=O(o,t[n]):o.version=0,r[n]=o}}),r}(a.bootstrap):{},_=void 0,J=void 0,q=void 0,z=void 0,G=void 0,M=void 0,X=!0;function V(e,n){return void 0===a[e]?n:a[e]}function oe(){return v&&!function(){var e=void 0;e=window.navigator&&void 0!==window.navigator.doNotTrack?window.navigator.doNotTrack:window.navigator&&void 0!==window.navigator.msDoNotTrack?window.navigator.msDoNotTrack:window.doNotTrack;return"1"===e||"yes"===e}()}function ie(e){e.user?(X=!1,oe()&&R.enqueue(e)):X&&(console&&console.warn&&console.warn("Be sure to call `identify` in the LaunchDarkly client: http://docs.launchdarkly.com/docs/running-an-ab-test#include-the-client-side-snippet"),X=!1)}var ae=Y(n,function(e){e&&ie({kind:"identify",key:e.key,user:e,creationDate:(new Date).getTime()})}),ue=function(e,n,t){var r={};function o(){var r="",o=t.getUser();return o&&(r=n||w(JSON.stringify(o))),"ld:"+e+":"+r}return r.loadFlags=function(){var e=o(),n=void 0,t=void 0;try{n=window.localStorage.getItem(e)}catch(e){return console.warn(U()),null}try{t=JSON.parse(n)}catch(e){return r.clearFlags(),null}if(t){var i=t.$schema;(void 0===i||i<1)&&(t=function(e){var n={};for(var t in e)e.hasOwnProperty(t)&&(n[t]={value:e[t],version:0});return n}(t))}return t},r.saveFlags=function(e){var n=o(),t=O({},e,{$schema:1});try{window.localStorage.setItem(n,JSON.stringify(t))}catch(e){console.warn(U())}},r.clearFlags=function(){var e=o();try{window.localStorage.removeItem(e)}catch(e){}},r}(m,f,ae);function se(e,n,t){var r=ae.getUser(),o=new Date,i=n?n.value:null;if(!p){var a=JSON.stringify(i)+(r&&r.key?r.key:"")+e,u=T[a];if(u&&o-u<3e5)return;T[a]=o}var s={kind:"feature",key:e,user:r,value:i,variation:n?n.variationIndex:null,default:t,creationDate:o.getTime(),reason:n?n.reason:null},c=x[e];c&&(s.version=c.flagVersion?c.flagVersion:c.version,s.trackEvents=c.trackEvents,s.debugEventsUntilDate=c.debugEventsUntilDate),ie(s)}function ce(e,n){var t={kind:e,key:n.key,data:null,url:window.location.href,user:ae.getUser(),creationDate:(new Date).getTime()};return"click"===e&&(t.selector=n.selector),ie(t)}function le(e,n,t){var r=void 0;if(x&&x.hasOwnProperty(e)&&x[e]&&!x[e].deleted){var o=x[e];r=fe(o),null!==o.value&&void 0!==o.value||(r.value=n)}else r={value:n,variationIndex:null,reason:{kind:"ERROR",errorKind:"FLAG_NOT_FOUND"}};return t&&se(e,r,n),r}function fe(e){return{value:e.value,variationIndex:void 0===e.variation?null:e.variation,reason:e.reason||null}}function ve(){z=!0,ae.getUser()&&D.connect(ae.getUser(),{ping:function(){N.fetchFlagSettings(ae.getUser(),f,function(e,n){e&&b.maybeReportError(new u(I(e))),pe(n)})},put:function(e){pe(JSON.parse(e.data))},patch:function(e){var n=JSON.parse(e.data),t=x[n.key];if(!t||!t.version||!n.version||t.version<n.version){var r={},o=O({},n);delete o.key,x[n.key]=o;var i=fe(o);r[n.key]=t?{previous:t.value,current:i}:{current:i},ge(r)}},delete:function(e){var n=JSON.parse(e.data);if(!x[n.key]||x[n.key].version<n.version){var t={};x[n.key]&&!x[n.key].deleted&&(t[n.key]={previous:x[n.key].value}),x[n.key]={version:n.version,deleted:!0},ge(t)}}})}function de(){z&&(D.disconnect(),z=!1)}function pe(e){var n={};if(e){for(var t in x)x.hasOwnProperty(t)&&x[t]&&(e[t]&&(r=e[t].value,o=x[t].value,!h(r,o))?n[t]={previous:x[t].value,current:fe(e[t])}:e[t]&&!e[t].deleted||(n[t]={previous:x[t].value}));var r,o;for(var i in e)e.hasOwnProperty(i)&&e[i]&&(!x[i]||x[i].deleted)&&(n[i]={current:fe(e[i])});x=e,ge(n)}}function ge(e){var n=Object.keys(e);if(J&&ue.saveFlags(x),n.length>0){var t={};n.forEach(function(n){var r=e[n].current,o=r?r.value:void 0,i=e[n].previous;b.emit(ne+":"+n,o,i),t[n]=r?{current:o,previous:i}:{previous:i}}),b.emit(ne,t),g||n.forEach(function(n){se(n,e[n].current)})}}function ye(e){var n=null===e?void 0:e;if(n!==G){var t=(G=n)||M&&void 0===G;t&&!z?ve():!t&&z&&de()}}function he(e){return e===ne||e.substr(0,ne.length+1)===ne+":"}function me(){_&&_.dispose(),q&&q.length&&(_=K(q,ce))}function we(){void 0!==a.streaming&&ye(a.streaming),b.emit(W),b.emit(Z)}function ke(e){b.maybeReportError(e),b.emit(ee,e),b.emit(W)}function be(){v&&R.start()}e||E(function(){b.maybeReportError(new r(P()))}),n?n.key||E(function(){b.maybeReportError(new o(A()))}):E(function(){b.maybeReportError(new o(j()))}),"object"===Q(a.bootstrap)?E(we):"string"==typeof a.bootstrap&&"LOCALSTORAGE"===a.bootstrap.toUpperCase()&&window.localStorage?(J=!0,null===(x=ue.loadFlags())?(x={},N.fetchFlagSettings(ae.getUser(),f,function(e,n){e?ke(new u(I(e))):(n?pe(n):x={},we())})):(E(we),N.fetchFlagSettings(ae.getUser(),f,function(e,n){e&&b.maybeReportError(new u(I(e))),n&&pe(n)}))):N.fetchFlagSettings(ae.getUser(),f,function(e,n){e?(x={},ke(new u(I(e)))):(x=n||{},we())}),y&&N.fetchGoals(function(e,n){e&&b.maybeReportError(new t((e.message,e.message))),n&&n.length>0&&(_=K(q=n,ce),function(e,n){var t=window.location.href,r=void 0;function o(){(r=window.location.href)!==t&&(t=r,n())}!function e(n,t){n(),setTimeout(function(){e(n,t)},t)}(o,e),window.history&&window.history.pushState?window.addEventListener("popstate",o):window.addEventListener("hashchange",o)}(re,me)),b.emit(te)}),"complete"!==document.readyState?window.addEventListener("load",be):be(),window.addEventListener("beforeunload",function(){v&&(R.stop(),R.flush(!0))}),window.addEventListener("message",function(e){if(e.origin===s&&"SYN"===e.data.type){window.editorClientBaseUrl=s;var n=document.createElement("script");n.type="text/javascript",n.async=!0,n.src=s+e.data.editorClientUrl;var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(n,t)}});var Ee=new Promise(function(e){var n=b.on(W,function(){b.off(W,n),e()})}),Se=new Promise(function(e){var n=b.on(te,function(){b.off(te,n),e()})}),De=new Promise(function(e,n){var t=b.on(Z,function(){b.off(Z,t),e()}),r=b.on(ee,function(e){b.off(ee,r),n(e)})});return{waitForInitialization:function(){return De},waitUntilReady:function(){return Ee},waitUntilGoalsReady:function(){return Se},identify:function(e,n,t){return J&&ue.clearFlags(),S(new Promise(function(t,r){if(e&&null!==e.key&&void 0!==e.key)ae.setUser(e),N.fetchFlagSettings(ae.getUser(),n,function(e,n){if(e)return b.maybeReportError(new u(I(e))),r(e);n&&pe(n),t(function(e){var n={};for(var t in e)e.hasOwnProperty(t)&&(n[t]=e[t].value);return n}(n)),z&&ve()});else{var i=new o(e?A():j());b.maybeReportError(i),r(i)}}),t)},variation:function(e,n){return le(e,n,!0).value},variationDetail:function(e,n){return le(e,n,!0)},track:function(e,n){"string"==typeof e?(q&&!function(e){if(!q||0===q.length)return!1;for(var n=0;n<q.length;n++)if("custom"===q[n].kind&&q[n].key===e)return!0;return!1}(e)&&console.warn(L(e)),ie({kind:"custom",key:e,data:n,user:ae.getUser(),url:window.location.href,creationDate:(new Date).getTime()})):b.maybeReportError(new i(L(e)))},on:function(e,n,t){he(e)?(M=!0,z||void 0!==G||ve(),b.on(e,n,t)):b.on.apply(b,arguments)},off:function(e){if(b.off.apply(b,arguments),he(e)){var n=!1;b.getEvents().forEach(function(e){he(e)&&b.getEventListenerCount(e)>0&&(n=!0)}),n||(M=!1,z&&void 0===G&&de())}},setStreaming:ye,flush:function(e){return S(new Promise(function(e){return v?e(R.flush()):e()},e))},allFlags:function(){var e={};if(!x)return e;for(var n in x)x.hasOwnProperty(n)&&(e[n]=le(n,null,!g).value);return e}}}var ie={initialize:function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return console&&console.warn&&console.warn(_("default export","named LDClient export")),oe(e,n,t)},version:"2.8.0"};e.initialize=oe,e.version="2.8.0",e.default=ie,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ldclient.min.js.map

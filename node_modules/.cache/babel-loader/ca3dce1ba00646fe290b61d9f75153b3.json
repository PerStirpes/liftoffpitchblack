{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\n\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));\n\nvar _getPrototypeOf3 = _interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));\n\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));\n\nvar _assertThisInitialized2 = _interopRequireDefault(require(\"@babel/runtime/helpers/assertThisInitialized\"));\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _context2 = require(\"./context\");\n\nvar _lodash = _interopRequireDefault(require(\"lodash.camelcase\"));\n\nvar _initLDClient = require(\"./initLDClient\");\n\nvar _default = function _default(WrappedComponent, _ref) {\n  var clientSideId = _ref.clientSideId,\n      user = _ref.user,\n      options = _ref.options;\n  return (\n    /*#__PURE__*/\n    function (_Component) {\n      (0, _inherits2.default)(_class2, _Component);\n\n      function _class2() {\n        var _getPrototypeOf2;\n\n        var _this;\n\n        (0, _classCallCheck2.default)(this, _class2);\n\n        for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n          args[_key] = arguments[_key];\n        }\n\n        _this = (0, _possibleConstructorReturn2.default)(this, (_getPrototypeOf2 = (0, _getPrototypeOf3.default)(_class2)).call.apply(_getPrototypeOf2, [this].concat(args)));\n        (0, _defineProperty2.default)((0, _assertThisInitialized2.default)((0, _assertThisInitialized2.default)(_this)), \"state\", {\n          flags: {}\n        });\n        (0, _defineProperty2.default)((0, _assertThisInitialized2.default)((0, _assertThisInitialized2.default)(_this)), \"subscribeToChanges\", function () {\n          _initLDClient.ldClient.on('change', function (changes) {\n            // changes look like: {'dev-test-flag': {current: true, previous: false}, ...}\n            var flattened = {};\n\n            for (var key in changes) {\n              flattened[(0, _lodash.default)(key)] = changes[key].current;\n            }\n\n            var flags = (0, _objectSpread2.default)({}, _this.state.flags, flattened);\n\n            _this.setState({\n              flags: flags\n            });\n          });\n        });\n        return _this;\n      }\n\n      (0, _createClass2.default)(_class2, [{\n        key: \"componentDidMount\",\n        value: function () {\n          var _componentDidMount = (0, _asyncToGenerator2.default)(\n          /*#__PURE__*/\n          _regenerator.default.mark(function _callee() {\n            var flags;\n            return _regenerator.default.wrap(function _callee$(_context) {\n              while (1) {\n                switch (_context.prev = _context.next) {\n                  case 0:\n                    _context.next = 2;\n                    return (0, _initLDClient.initLDClient)(clientSideId, user, options);\n\n                  case 2:\n                    flags = _context.sent;\n                    this.setState({\n                      flags: flags\n                    }); //eslint-disable-line\n\n                    this.subscribeToChanges();\n\n                  case 5:\n                  case \"end\":\n                    return _context.stop();\n                }\n              }\n            }, _callee, this);\n          }));\n\n          return function componentDidMount() {\n            return _componentDidMount.apply(this, arguments);\n          };\n        }()\n      }, {\n        key: \"render\",\n        value: function render() {\n          return _react.default.createElement(_context2.Provider, {\n            value: this.state.flags\n          }, _react.default.createElement(WrappedComponent, this.props));\n        }\n      }]);\n      return _class2;\n    }(_react.Component)\n  );\n};\n\nexports.default = _default;","map":null,"metadata":{},"sourceType":"script"}
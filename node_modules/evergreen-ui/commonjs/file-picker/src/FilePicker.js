"use strict";

var _interopRequireWildcard = require("@babel/runtime/helpers/interopRequireWildcard");

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = exports.CLASS_PREFIX = void 0;

var _extends2 = _interopRequireDefault(require("@babel/runtime/helpers/extends"));

var _objectWithoutProperties2 = _interopRequireDefault(require("@babel/runtime/helpers/objectWithoutProperties"));

var _toConsumableArray2 = _interopRequireDefault(require("@babel/runtime/helpers/toConsumableArray"));

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _assertThisInitialized2 = _interopRequireDefault(require("@babel/runtime/helpers/assertThisInitialized"));

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _react = _interopRequireWildcard(require("react"));

var _propTypes = _interopRequireDefault(require("prop-types"));

var _uiBox = _interopRequireDefault(require("ui-box"));

var _buttons = require("../../buttons");

var _textInput = require("../../text-input");

var CLASS_PREFIX = 'evergreen-file-picker';
exports.CLASS_PREFIX = CLASS_PREFIX;

var FilePicker =
/*#__PURE__*/
function (_PureComponent) {
  (0, _inherits2.default)(FilePicker, _PureComponent);

  function FilePicker() {
    var _this;

    (0, _classCallCheck2.default)(this, FilePicker);
    _this = (0, _possibleConstructorReturn2.default)(this, (0, _getPrototypeOf2.default)(FilePicker).call(this));
    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)((0, _assertThisInitialized2.default)(_this)), "fileInputRef", function (node) {
      _this.fileInput = node;
    });
    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)((0, _assertThisInitialized2.default)(_this)), "handleFileChange", function (e) {
      var onChange = _this.props.onChange; // Firefox returns the same array instance each time for some reason

      var files = (0, _toConsumableArray2.default)(e.target.files);

      _this.setState({
        files: files
      });

      if (onChange) {
        onChange(files);
      }
    });
    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)((0, _assertThisInitialized2.default)(_this)), "handleButtonClick", function () {
      _this.fileInput.click();
    });
    _this.state = {
      files: []
    };
    return _this;
  }

  (0, _createClass2.default)(FilePicker, [{
    key: "render",
    value: function render() {
      var _this$props = this.props,
          name = _this$props.name,
          accept = _this$props.accept,
          required = _this$props.required,
          multiple = _this$props.multiple,
          disabled = _this$props.disabled,
          capture = _this$props.capture,
          height = _this$props.height,
          onChange = _this$props.onChange,
          props = (0, _objectWithoutProperties2.default)(_this$props, ["name", "accept", "required", "multiple", "disabled", "capture", "height", "onChange"]);
      var files = this.state.files;
      var inputValue;

      if (files.length === 0) {
        inputValue = '';
      } else if (files.length === 1) {
        inputValue = files[0].name;
      } else {
        inputValue = "".concat(files.length, " files");
      }

      var buttonText;

      if (files.length === 0) {
        buttonText = 'Select file';
      } else if (files.length === 1) {
        buttonText = 'Replace file';
      } else {
        buttonText = 'Replace files';
      }

      return _react.default.createElement(_uiBox.default, (0, _extends2.default)({
        display: "flex",
        className: "".concat(CLASS_PREFIX, "-root")
      }, props), _react.default.createElement(_uiBox.default, {
        innerRef: this.fileInputRef,
        className: "".concat(CLASS_PREFIX, "-file-input"),
        is: "input",
        type: "file",
        name: name,
        accept: accept,
        required: required,
        multiple: multiple,
        disabled: disabled,
        capture: capture,
        onChange: this.handleFileChange,
        display: "none"
      }), _react.default.createElement(_textInput.TextInput, {
        className: "".concat(CLASS_PREFIX, "-text-input"),
        readOnly: true,
        value: inputValue,
        placeholder: "Select a file to upload\u2026" // There's a weird specifity issue when there's two differently sized inputs on the page
        ,
        borderTopRightRadius: "0 !important",
        borderBottomRightRadius: "0 !important",
        height: height,
        flex: 1,
        textOverflow: "ellipsis"
      }), _react.default.createElement(_buttons.Button, {
        className: "".concat(CLASS_PREFIX, "-button"),
        onClick: this.handleButtonClick,
        disabled: disabled,
        borderTopLeftRadius: 0,
        borderBottomLeftRadius: 0,
        height: height,
        flexShrink: 0,
        type: "button"
      }, buttonText));
    }
  }]);
  return FilePicker;
}(_react.PureComponent);

exports.default = FilePicker;
FilePicker.displayName = "FilePicker";
(0, _defineProperty2.default)(FilePicker, "propTypes", {
  /**
   * Name attribute of the input.
   */
  name: _propTypes.default.string,

  /**
   * The accept attribute of the input.
   */
  accept: _propTypes.default.oneOfType([_propTypes.default.string, _propTypes.default.arrayOf(_propTypes.default.string)]),

  /**
   * When true, the file picker is required.
   */
  required: _propTypes.default.bool,

  /**
   * When true, accept multiple files.
   */
  multiple: _propTypes.default.bool,

  /**
   * When true, the filepicker is disabled.
   */
  disabled: _propTypes.default.bool,

  /**
   * The capture attribute of the input.
   */
  capture: _propTypes.default.bool,

  /**
   * The height of the file picker.
   */
  height: _propTypes.default.number,

  /**
   * Function called when onChange is fired
   */
  onChange: _propTypes.default.func
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9maWxlLXBpY2tlci9zcmMvRmlsZVBpY2tlci5qcyJdLCJuYW1lcyI6WyJDTEFTU19QUkVGSVgiLCJGaWxlUGlja2VyIiwibm9kZSIsImZpbGVJbnB1dCIsImUiLCJvbkNoYW5nZSIsInByb3BzIiwiZmlsZXMiLCJ0YXJnZXQiLCJzZXRTdGF0ZSIsImNsaWNrIiwic3RhdGUiLCJuYW1lIiwiYWNjZXB0IiwicmVxdWlyZWQiLCJtdWx0aXBsZSIsImRpc2FibGVkIiwiY2FwdHVyZSIsImhlaWdodCIsImlucHV0VmFsdWUiLCJsZW5ndGgiLCJidXR0b25UZXh0IiwiZmlsZUlucHV0UmVmIiwiaGFuZGxlRmlsZUNoYW5nZSIsImhhbmRsZUJ1dHRvbkNsaWNrIiwiUHVyZUNvbXBvbmVudCIsIlByb3BUeXBlcyIsInN0cmluZyIsIm9uZU9mVHlwZSIsImFycmF5T2YiLCJib29sIiwibnVtYmVyIiwiZnVuYyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUVPLElBQU1BLFlBQVksR0FBRyx1QkFBckI7OztJQUVjQyxVOzs7OztBQThDbkIsd0JBQWM7QUFBQTs7QUFBQTtBQUNaO0FBRFkscUlBc0ZDLFVBQUFDLElBQUksRUFBSTtBQUNyQixZQUFLQyxTQUFMLEdBQWlCRCxJQUFqQjtBQUNELEtBeEZhO0FBQUEseUlBMEZLLFVBQUFFLENBQUMsRUFBSTtBQUFBLFVBQ2RDLFFBRGMsR0FDRCxNQUFLQyxLQURKLENBQ2RELFFBRGMsRUFFdEI7O0FBQ0EsVUFBTUUsS0FBSyxvQ0FBT0gsQ0FBQyxDQUFDSSxNQUFGLENBQVNELEtBQWhCLENBQVg7O0FBRUEsWUFBS0UsUUFBTCxDQUFjO0FBQUVGLFFBQUFBLEtBQUssRUFBTEE7QUFBRixPQUFkOztBQUVBLFVBQUlGLFFBQUosRUFBYztBQUNaQSxRQUFBQSxRQUFRLENBQUNFLEtBQUQsQ0FBUjtBQUNEO0FBQ0Ys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QUFNRSxRQUFBLE1BQU0sRUFBRUUsTUFOVjtBQU9FLFFBQUEsVUFBVSxFQUFFLENBUGQ7QUFRRSxRQUFBLElBQUksRUFBQztBQVJQLFNBVUdHLFVBVkgsQ0E3QkYsQ0FERjtBQTRDRDs7O0VBbElxQ0ksb0I7OztBQUFuQnhCLFU7OEJBQUFBLFUsZUFDQTtBQUNqQjs7O0FBR0FXLEVBQUFBLElBQUksRUFBRWMsbUJBQVVDLE1BSkM7O0FBTWpCOzs7QUFHQWQsRUFBQUEsTUFBTSxFQUFFYSxtQkFBVUUsU0FBVixDQUFvQixDQUMxQkYsbUJBQVVDLE1BRGdCLEVBRTFCRCxtQkFBVUcsT0FBVixDQUFrQkgsbUJBQVVDLE1BQTVCLENBRjBCLENBQXBCLENBVFM7O0FBY2pCOzs7QUFHQWIsRUFBQUEsUUFBUSxFQUFFWSxtQkFBVUksSUFqQkg7O0FBbUJqQjs7O0FBR0FmLEVBQUFBLFFBQVEsRUFBRVcsbUJBQVVJLElBdEJIOztBQXdCakI7OztBQUdBZCxFQUFBQSxRQUFRLEVBQUVVLG1CQUFVSSxJQTNCSDs7QUE2QmpCOzs7QUFHQWIsRUFBQUEsT0FBTyxFQUFFUyxtQkFBVUksSUFoQ0Y7O0FBa0NqQjs7O0FBR0FaLEVBQUFBLE1BQU0sRUFBRVEsbUJBQVVLLE1BckNEOztBQXVDakI7OztBQUdBMUIsRUFBQUEsUUFBUSxFQUFFcUIsbUJBQVVNO0FBMUNILEMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QsIHsgUHVyZUNvbXBvbmVudCB9IGZyb20gJ3JlYWN0J1xuaW1wb3J0IFByb3BUeXBlcyBmcm9tICdwcm9wLXR5cGVzJ1xuaW1wb3J0IEJveCBmcm9tICd1aS1ib3gnXG5pbXBvcnQgeyBCdXR0b24gfSBmcm9tICcuLi8uLi9idXR0b25zJ1xuaW1wb3J0IHsgVGV4dElucHV0IH0gZnJvbSAnLi4vLi4vdGV4dC1pbnB1dCdcblxuZXhwb3J0IGNvbnN0IENMQVNTX1BSRUZJWCA9ICdldmVyZ3JlZW4tZmlsZS1waWNrZXInXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEZpbGVQaWNrZXIgZXh0ZW5kcyBQdXJlQ29tcG9uZW50IHtcbiAgc3RhdGljIHByb3BUeXBlcyA9IHtcbiAgICAvKipcbiAgICAgKiBOYW1lIGF0dHJpYnV0ZSBvZiB0aGUgaW5wdXQuXG4gICAgICovXG4gICAgbmFtZTogUHJvcFR5cGVzLnN0cmluZyxcblxuICAgIC8qKlxuICAgICAqIFRoZSBhY2NlcHQgYXR0cmlidXRlIG9mIHRoZSBpbnB1dC5cbiAgICAgKi9cbiAgICBhY2NlcHQ6IFByb3BUeXBlcy5vbmVPZlR5cGUoW1xuICAgICAgUHJvcFR5cGVzLnN0cmluZyxcbiAgICAgIFByb3BUeXBlcy5hcnJheU9mKFByb3BUeXBlcy5zdHJpbmcpXG4gICAgXSksXG5cbiAgICAvKipcbiAgICAgKiBXaGVuIHRydWUsIHRoZSBmaWxlIHBpY2tlciBpcyByZXF1aXJlZC5cbiAgICAgKi9cbiAgICByZXF1aXJlZDogUHJvcFR5cGVzLmJvb2wsXG5cbiAgICAvKipcbiAgICAgKiBXaGVuIHRydWUsIGFjY2VwdCBtdWx0aXBsZSBmaWxlcy5cbiAgICAgKi9cbiAgICBtdWx0aXBsZTogUHJvcFR5cGVzLmJvb2wsXG5cbiAgICAvKipcbiAgICAgKiBXaGVuIHRydWUsIHRoZSBmaWxlcGlja2VyIGlzIGRpc2FibGVkLlxuICAgICAqL1xuICAgIGRpc2FibGVkOiBQcm9wVHlwZXMuYm9vbCxcblxuICAgIC8qKlxuICAgICAqIFRoZSBjYXB0dXJlIGF0dHJpYnV0ZSBvZiB0aGUgaW5wdXQuXG4gICAgICovXG4gICAgY2FwdHVyZTogUHJvcFR5cGVzLmJvb2wsXG5cbiAgICAvKipcbiAgICAgKiBUaGUgaGVpZ2h0IG9mIHRoZSBmaWxlIHBpY2tlci5cbiAgICAgKi9cbiAgICBoZWlnaHQ6IFByb3BUeXBlcy5udW1iZXIsXG5cbiAgICAvKipcbiAgICAgKiBGdW5jdGlvbiBjYWxsZWQgd2hlbiBvbkNoYW5nZSBpcyBmaXJlZFxuICAgICAqL1xuICAgIG9uQ2hhbmdlOiBQcm9wVHlwZXMuZnVuY1xuICB9XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoKVxuXG4gICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgIGZpbGVzOiBbXVxuICAgIH1cbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICBjb25zdCB7XG4gICAgICBuYW1lLFxuICAgICAgYWNjZXB0LFxuICAgICAgcmVxdWlyZWQsXG4gICAgICBtdWx0aXBsZSxcbiAgICAgIGRpc2FibGVkLFxuICAgICAgY2FwdHVyZSxcbiAgICAgIGhlaWdodCxcbiAgICAgIG9uQ2hhbmdlLCAvLyBSZW1vdmUgb25DaGFuZ2UgZnJvbSBwcm9wc1xuICAgICAgLi4ucHJvcHNcbiAgICB9ID0gdGhpcy5wcm9wc1xuICAgIGNvbnN0IHsgZmlsZXMgfSA9IHRoaXMuc3RhdGVcblxuICAgIGxldCBpbnB1dFZhbHVlXG4gICAgaWYgKGZpbGVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgaW5wdXRWYWx1ZSA9ICcnXG4gICAgfSBlbHNlIGlmIChmaWxlcy5sZW5ndGggPT09IDEpIHtcbiAgICAgIGlucHV0VmFsdWUgPSBmaWxlc1swXS5uYW1lXG4gICAgfSBlbHNlIHtcbiAgICAgIGlucHV0VmFsdWUgPSBgJHtmaWxlcy5sZW5ndGh9IGZpbGVzYFxuICAgIH1cblxuICAgIGxldCBidXR0b25UZXh0XG4gICAgaWYgKGZpbGVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgYnV0dG9uVGV4dCA9ICdTZWxlY3QgZmlsZSdcbiAgICB9IGVsc2UgaWYgKGZpbGVzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgYnV0dG9uVGV4dCA9ICdSZXBsYWNlIGZpbGUnXG4gICAgfSBlbHNlIHtcbiAgICAgIGJ1dHRvblRleHQgPSAnUmVwbGFjZSBmaWxlcydcbiAgICB9XG5cbiAgICByZXR1cm4gKFxuICAgICAgPEJveCBkaXNwbGF5PVwiZmxleFwiIGNsYXNzTmFtZT17YCR7Q0xBU1NfUFJFRklYfS1yb290YH0gey4uLnByb3BzfT5cbiAgICAgICAgPEJveFxuICAgICAgICAgIGlubmVyUmVmPXt0aGlzLmZpbGVJbnB1dFJlZn1cbiAgICAgICAgICBjbGFzc05hbWU9e2Ake0NMQVNTX1BSRUZJWH0tZmlsZS1pbnB1dGB9XG4gICAgICAgICAgaXM9XCJpbnB1dFwiXG4gICAgICAgICAgdHlwZT1cImZpbGVcIlxuICAgICAgICAgIG5hbWU9e25hbWV9XG4gICAgICAgICAgYWNjZXB0PXthY2NlcHR9XG4gICAgICAgICAgcmVxdWlyZWQ9e3JlcXVpcmVkfVxuICAgICAgICAgIG11bHRpcGxlPXttdWx0aXBsZX1cbiAgICAgICAgICBkaXNhYmxlZD17ZGlzYWJsZWR9XG4gICAgICAgICAgY2FwdHVyZT17Y2FwdHVyZX1cbiAgICAgICAgICBvbkNoYW5nZT17dGhpcy5oYW5kbGVGaWxlQ2hhbmdlfVxuICAgICAgICAgIGRpc3BsYXk9XCJub25lXCJcbiAgICAgICAgLz5cblxuICAgICAgICA8VGV4dElucHV0XG4gICAgICAgICAgY2xhc3NOYW1lPXtgJHtDTEFTU19QUkVGSVh9LXRleHQtaW5wdXRgfVxuICAgICAgICAgIHJlYWRPbmx5XG4gICAgICAgICAgdmFsdWU9e2lucHV0VmFsdWV9XG4gICAgICAgICAgcGxhY2Vob2xkZXI9XCJTZWxlY3QgYSBmaWxlIHRvIHVwbG9hZOKAplwiXG4gICAgICAgICAgLy8gVGhlcmUncyBhIHdlaXJkIHNwZWNpZml0eSBpc3N1ZSB3aGVuIHRoZXJlJ3MgdHdvIGRpZmZlcmVudGx5IHNpemVkIGlucHV0cyBvbiB0aGUgcGFnZVxuICAgICAgICAgIGJvcmRlclRvcFJpZ2h0UmFkaXVzPVwiMCAhaW1wb3J0YW50XCJcbiAgICAgICAgICBib3JkZXJCb3R0b21SaWdodFJhZGl1cz1cIjAgIWltcG9ydGFudFwiXG4gICAgICAgICAgaGVpZ2h0PXtoZWlnaHR9XG4gICAgICAgICAgZmxleD17MX1cbiAgICAgICAgICB0ZXh0T3ZlcmZsb3c9XCJlbGxpcHNpc1wiXG4gICAgICAgIC8+XG5cbiAgICAgICAgPEJ1dHRvblxuICAgICAgICAgIGNsYXNzTmFtZT17YCR7Q0xBU1NfUFJFRklYfS1idXR0b25gfVxuICAgICAgICAgIG9uQ2xpY2s9e3RoaXMuaGFuZGxlQnV0dG9uQ2xpY2t9XG4gICAgICAgICAgZGlzYWJsZWQ9e2Rpc2FibGVkfVxuICAgICAgICAgIGJvcmRlclRvcExlZnRSYWRpdXM9ezB9XG4gICAgICAgICAgYm9yZGVyQm90dG9tTGVmdFJhZGl1cz17MH1cbiAgICAgICAgICBoZWlnaHQ9e2hlaWdodH1cbiAgICAgICAgICBmbGV4U2hyaW5rPXswfVxuICAgICAgICAgIHR5cGU9XCJidXR0b25cIlxuICAgICAgICA+XG4gICAgICAgICAge2J1dHRvblRleHR9XG4gICAgICAgIDwvQnV0dG9uPlxuICAgICAgPC9Cb3g+XG4gICAgKVxuICB9XG5cbiAgZmlsZUlucHV0UmVmID0gbm9kZSA9PiB7XG4gICAgdGhpcy5maWxlSW5wdXQgPSBub2RlXG4gIH1cblxuICBoYW5kbGVGaWxlQ2hhbmdlID0gZSA9PiB7XG4gICAgY29uc3QgeyBvbkNoYW5nZSB9ID0gdGhpcy5wcm9wc1xuICAgIC8vIEZpcmVmb3ggcmV0dXJucyB0aGUgc2FtZSBhcnJheSBpbnN0YW5jZSBlYWNoIHRpbWUgZm9yIHNvbWUgcmVhc29uXG4gICAgY29uc3QgZmlsZXMgPSBbLi4uZS50YXJnZXQuZmlsZXNdXG5cbiAgICB0aGlzLnNldFN0YXRlKHsgZmlsZXMgfSlcblxuICAgIGlmIChvbkNoYW5nZSkge1xuICAgICAgb25DaGFuZ2UoZmlsZXMpXG4gICAgfVxuICB9XG5cbiAgaGFuZGxlQnV0dG9uQ2xpY2sgPSAoKSA9PiB7XG4gICAgdGhpcy5maWxlSW5wdXQuY2xpY2soKVxuICB9XG59XG4iXX0=